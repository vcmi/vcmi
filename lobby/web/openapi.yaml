openapi: 3.0.0
info:
  title: VCMI Lobby API
  description: REST API for VCMI Lobby Server statistics and information
  version: 1.0.0
servers:
  - url: /api/v1
    description: API v1
paths:
  /stats:
    get:
      summary: Get lobby statistics
      description: Returns comprehensive statistics about the VCMI lobby including online players, registered players, games, and lobbies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  onlinePlayers:
                    type: array
                    items:
                      type: string
                    description: List of currently online player display names
                  onlinePlayersCount:
                    type: object
                    properties:
                      current:
                        type: integer
                        description: Currently online players
                      lastHour:
                        type: integer
                        description: Active in last hour
                      lastDay:
                        type: integer
                        description: Active in last 24 hours
                      lastWeek:
                        type: integer
                        description: Active in last week
                      lastMonth:
                        type: integer
                        description: Active in last month
                      lastYear:
                        type: integer
                        description: Active in last year
                  registeredPlayersCount:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Total registered players
                      lastDay:
                        type: integer
                        description: Registered in last 24 hours
                      lastWeek:
                        type: integer
                        description: Registered in last week
                      lastMonth:
                        type: integer
                        description: Registered in last month
                      lastYear:
                        type: integer
                        description: Registered in last year
                  gameCount:
                    type: object
                    properties:
                      current:
                        type: integer
                        description: Currently running games
                      total:
                        type: integer
                        description: Total completed games
                      lastDay:
                        type: integer
                        description: Games in last 24 hours
                      lastWeek:
                        type: integer
                        description: Games in last week
                      lastMonth:
                        type: integer
                        description: Games in last month
                      lastYear:
                        type: integer
                        description: Games in last year
                  lobbyCount:
                    type: object
                    properties:
                      current:
                        type: integer
                        description: Currently open lobbies
                      public:
                        type: integer
                        description: Public lobbies
                      private:
                        type: integer
                        description: Private lobbies
                  lobbyStartTime:
                    type: string
                    format: date-time
                    description: Server start timestamp
                  server:
                    type: string
                    description: Server name
                  lobbyVersion:
                    type: string
                    description: VCMI version
                  apiVersion:
                    type: string
                    description: API version
  /chats:
    get:
      summary: Get public chat messages
      description: Returns recent messages from a public chat channel
      parameters:
        - in: query
          name: channelName
          schema:
            type: string
            default: english
          required: false
          description: Name of the chat channel (default is 'english')
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  channelName:
                    type: string
                    description: Name of the requested chat channel
                  messages:
                    type: array
                    items:
                      type: object
                      properties:
                        displayName:
                          type: string
                          description: Display name of the message sender
                        messageText:
                          type: string
                          description: The message content
                        ageSeconds:
                          type: integer
                          description: Message age in seconds
                        timestamp:
                          type: string
                          format: date-time
                          description: Message creation timestamp
  /rooms:
    get:
      summary: Get game rooms
      description: Returns recent game rooms with optional time filter
      parameters:
        - in: query
          name: hours
          schema:
            type: integer
            default: -1
          required: false
          description: Filter rooms created in last N hours (-1 for all rooms, default is -1)
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
            minimum: 1
            maximum: 250
          required: false
          description: Maximum number of rooms to return (default 50, max 250)
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  hours:
                    type: integer
                    description: Hours filter applied
                  limit:
                    type: integer
                    description: Limit applied
                  count:
                    type: integer
                    description: Number of rooms returned
                  rooms:
                    type: array
                    items:
                      type: object
                      properties:
                        description:
                          type: string
                          description: Room description
                        status:
                          type: integer
                          description: Room status (0=preparing, 1=public, 2=private, 3=busy, 4=closed, 5=abandoned)
                        playerLimit:
                          type: integer
                          description: Maximum number of players
                        version:
                          type: string
                          description: Game version
                        secondsElapsed:
                          type: integer
                          description: Seconds since room creation
                        createdAt:
                          type: string
                          format: date-time
                          description: Room creation timestamp
                        mods:
                          type: object
                          description: JSON object containing mod configuration

